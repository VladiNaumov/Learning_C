/*
 * Пример: Система обработки событий
    Предположим, у нас есть система, которая должна обрабатывать разные события, такие как нажатие кнопки, перемещение мыши и закрытие окна.
    Мы будем использовать указатели на функции (коллбеки), чтобы связать события с соответствующими обработчиками.
 *
 * */

#include <stdio.h>

// Тип события
typedef enum {
    EVENT_CLICK,      // Нажатие кнопки
    EVENT_MOUSE_MOVE, // Перемещение мыши
    EVENT_CLOSE       // Закрытие окна
} EventType;

// Объявляем тип указателя на функцию для обработки событий
typedef void (*EventHandler)(void);

// Обработчик нажатия кнопки
void handleClick() {
    printf("Кнопка была нажата.\n");
}

// Обработчик перемещения мыши
void handleMouseMove() {
    printf("Мышь была перемещена.\n");
}

// Обработчик закрытия окна
void handleClose() {
    printf("Окно было закрыто.\n");
}

// Функция для обработки события
void processEvent(EventType event, EventHandler handler) {
    printf("Обработка события...\n");
    handler(); // Вызов соответствующего обработчика
}

int main() {
    // Создаем массив указателей на функции для каждого типа события
    EventHandler eventHandlers[] = {
            handleClick,    // Для EVENT_CLICK
            handleMouseMove, // Для EVENT_MOUSE_MOVE
            handleClose     // Для EVENT_CLOSE
    };

    // События, которые будем обрабатывать
    EventType events[] = {EVENT_CLICK, EVENT_MOUSE_MOVE, EVENT_CLOSE};

    // Обрабатываем каждое событие
    for (int i = 0; i < 3; ++i) {
        processEvent(events[i], eventHandlers[events[i]]);
    }

    return 0;
}

/*
 * Пояснение:
Тип события EventType:

Это перечисление, определяющее три возможных события: EVENT_CLICK (нажатие кнопки), EVENT_MOUSE_MOVE (перемещение мыши) и EVENT_CLOSE (закрытие окна).
Тип EventHandler:

Мы определяем тип указателя на функцию EventHandler, который указывает на функции, не принимающие параметров и не возвращающие значения (void (*EventHandler)(void)).
Обработчики событий:

handleClick() — функция, обрабатывающая нажатие кнопки.
handleMouseMove() — функция, обрабатывающая перемещение мыши.
handleClose() — функция, обрабатывающая закрытие окна.
Функция processEvent:

Эта функция принимает тип события и указатель на функцию-обработчик. Она вызывает переданный обработчик для обработки события.
Основная программа:

Мы создаем массив eventHandlers, содержащий указатели на соответствующие функции-обработчики.
Затем создаем массив событий events, которые хотим обработать.
Используя цикл for, мы обрабатываем каждое событие, вызывая processEvent с соответствующим обработчиком.
 * */
