/* fork_stdio_buf.c

   Эксперимент с fork() и буферизацией стандартного ввода/вывода.
*/
#include "tlpi_hdr.h"

int
main(int argc, char *argv[])
{
    /* Печать строки с использованием стандартной функции printf. */
    printf("Hello world\n");

    /* Печать строки с использованием системного вызова write (без буферизации). */
    write(STDOUT_FILENO, "Ciao\n", 5);

    /* Создание дочернего процесса. */
    if (fork() == -1)
        errExit("fork");

    /* Оба процесса (родительский и дочерний) продолжают выполнение отсюда. */

    exit(EXIT_SUCCESS);
}

/*

### Резюме кода:

В этом примере демонстрируется использование `fork()` в сочетании с буферизацией ввода/вывода. Программа делает два вывода на экран:

1. Сначала с помощью стандартной функции `printf()`, которая использует буферизацию вывода. После вызова `fork()` оба процесса (родительский и дочерний) могут вывести свои данные на стандартный вывод.

2. Затем с помощью низкоуровневой функции `write()`, которая выводит строку без буферизации. В этом случае вывод будет немедленно записан в файл или устройство, минуя стандартную буферизацию.

При вызове `fork()` дочерний процесс унаследует буферированный поток стандартного вывода, что может повлиять на порядок вывода в случае использования `printf()`. Однако с `write()` данные сразу отправляются в поток, и эффект буферизации не имеет значения.

Основной вывод, который можно ожидать при выполнении этой программы, это возможная смешанность строк "Hello world" и "Ciao", в зависимости от того, как операционная система планирует выполнение процессов после вызова `fork()`.
*/