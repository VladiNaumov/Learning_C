/* 14 File Systems */

/*
Устройства в Linux представлены в каталоге `/dev`, каждое имеет драйвер, который поддерживает операции, связанные с системными вызовами `open()`, `read()`, `write()`, и `close()`. 
Устройства могут быть реальными (аппаратными) или виртуальными, но все они используют единый API.

Жесткий диск может иметь разделы с файловыми системами, такими как ext2, которая включает загрузочный блок, суперблок, таблицу индексных дескрипторов и блоки данных. 
Эти таблицы хранят информацию о файле: его тип, размер, права доступа и т.д.

Linux поддерживает и журналируемые файловые системы (ReiserFS, ext3, ext4, XFS, JFS, Btrfs), которые записывают изменения метаданных в журнал. 
Это позволяет быстро восстановить систему после сбоя, избегая длительной проверки целостности.

Все файловые системы монтируются в едином дереве каталогов с корнем в `/`, где каждая точка монтирования определяет местоположение файловой системы. 
Для монтирования и размонтирования используются вызовы `mount()` и `umount()`. Информацию о файловой системе можно получить через `statvfs()`.

*/


/*
Функция mount():
Используется для монтирования файловой системы. Принимает параметры:
- source: исходное устройство или виртуальный источник данных,
- target: точка монтирования в дереве каталогов,
- fstype: тип файловой системы (например, "ext4", "xfs"),
- mountflags: различные флаги, такие как возможность только для чтения,
- data: дополнительные данные, зависящие от типа файловой системы.
Функция позволяет подключить новую файловую систему к дереву каталогов Linux.
*/

/*
 * mount - монтирует файловую систему.
 * source - путь к устройству или источнику.
 * target - точка монтирования.
 * fstype - тип файловой системы.
 * mountflags - флаги монтирования.
 * data - дополнительные данные для монтирования.
 * Возвращает 0 при успехе, -1 при ошибке.
 */
#include <sys/mount.h>
int mount(const char *source, const char *target, const char *fstype, unsigned long mountflags, const void *data);

/*
 * umount - размонтирует файловую систему.
 * target - точка монтирования.
 * Возвращает 0 при успехе, -1 при ошибке.
 */
#include <sys/mount.h>
int umount(const char *target);

/*
 * umount2 - размонтирует файловую систему с дополнительными флагами.
 * target - точка монтирования.
 * flags - флаги для размонтирования.
 * Возвращает 0 при успехе, -1 при ошибке.
 */
#include <sys/mount.h>
int umount2(const char *target, int flags);

/*
 * statvfs - получает информацию о файловой системе.
 * pathname - путь к файлу или каталогу.
 * statvfsbuf - структура для хранения информации.
 * Возвращает 0 при успехе, -1 при ошибке.
 */
#include <sys/statvfs.h>
int statvfs(const char *pathname, struct statvfs *statvfsbuf);

/*
 * fstatvfs - получает информацию о файловой системе через файловый дескриптор.
 * fd - файловый дескриптор.
 * statvfsbuf - структура для хранения информации.
 * Возвращает 0 при успехе, -1 при ошибке.
 */
#include <sys/statvfs.h>
int fstatvfs(int fd, struct statvfs *statvfsbuf);


