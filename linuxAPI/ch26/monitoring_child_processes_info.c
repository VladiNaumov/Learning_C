/* 26 Monitoring Child Processes */

##include <sys/wait.h>

/*
 * wait - ожидает завершения любого дочернего процесса и возвращает его pid.
 *
 * status - указатель на переменную, куда будет записан статус завершения дочернего процесса.
 * Возвращает pid завершенного процесса, или -1 в случае ошибки.
 */
pid_t wait(int *status);

#include <sys/wait.h>

/*
 * waitpid - ожидает завершения определенного дочернего процесса.
 *
 * pid - идентификатор процесса, за завершением которого нужно следить (или -1 для ожидания любого процесса).
 * status - указатель на переменную, куда будет записан статус завершения процесса.
 * options - дополнительные опции ожидания.
 * Возвращает pid завершенного процесса, или -1 в случае ошибки.
 */
pid_t waitpid(pid_t pid, int *status, int options);

#include <sys/wait.h>

/*
 * waitid - ожидает завершения дочернего процесса или изменение его состояния.
 *
 * idtype - тип идентификатора (например, P_PID для конкретного процесса или P_ALL для всех процессов).
 * id - идентификатор процесса.
 * infop - указатель на структуру siginfo_t, содержащую информацию о завершенном процессе.
 * options - дополнительные опции ожидания.
 * Возвращает 0 в случае успеха, или -1 в случае ошибки.
 */
int waitid(idtype_t idtype, id_t id, siginfo_t *infop, int options);

#define _BSD_SOURCE       /* Или #define _XOPEN_SOURCE 500 для wait3() */
#include <sys/resource.h>
#include <sys/wait.h>

/*
 * wait3 - ожидает завершения любого дочернего процесса и возвращает его pid, включая информацию об использовании ресурсов.
 *
 * status - указатель на переменную, куда будет записан статус завершения дочернего процесса.
 * options - дополнительные опции ожидания.
 * rusage - указатель на структуру rusage, в которую записывается информация об использовании ресурсов завершенного процесса.
 * Возвращает pid завершенного процесса, или -1 в случае ошибки.
 */
pid_t wait3(int *status, int options, struct rusage *rusage);

/*
 * wait4 - ожидает завершения определенного дочернего процесса, возвращая его pid и информацию об использовании ресурсов.
 *
 * pid - идентификатор процесса, за завершением которого нужно следить.
 * status - указатель на переменную, куда будет записан статус завершения процесса.
 * options - дополнительные опции ожидания.
 * rusage - указатель на структуру rusage, в которую записывается информация об использовании ресурсов завершенного процесса.
 * Возвращает pid завершенного процесса, или -1 в случае ошибки.
 */
pid_t wait4(pid_t pid, int *status, int options, struct rusage *rusage);
