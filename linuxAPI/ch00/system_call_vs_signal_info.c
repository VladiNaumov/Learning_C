/*
 Сигналы в Linux — это способ для процессов взаимодействовать между собой или с ядром, отправляя специальные уведомления. 
 При получении сигнала процесс может выполнить определенные действия, например, завершиться или проигнорировать сигнал.

### Основные сигналы
Некоторые важные сигналы в Linux:

- **SIGINT (2)** — Прерывает процесс (обычно от клавиатуры, сочетание `Ctrl + C`).
- **SIGTERM (15)** — Запрашивает завершение процесса. Процесс может обработать сигнал и выполнить безопасное завершение.
- **SIGKILL (9)** — Принудительно завершает процесс. Процесс не может перехватить или игнорировать этот сигнал.
- **SIGHUP (1)** — Часто используется для перезапуска процесса и обновления конфигурации.
- **SIGSEGV (11)** — Сигнал ошибки сегментации, указывает на попытку процесса обратиться к недоступной области памяти.
- **SIGCHLD** — Отправляется родительскому процессу, когда его дочерний процесс завершает работу.

### Обработка сигналов
В программе можно задать специальные обработчики для сигналов с помощью функции `signal()` или `sigaction()`. 
Это позволяет задавать функции, которые будут выполняться при получении сигнала.


Сигналы активно используются для управления процессами и отладки программ. 
Например, `SIGCHLD` полезен для ожидания завершения дочерних процессов в серверных приложениях.

Сигналы в Linux работают как асинхронные уведомления, которые ядро отправляет процессам для извещения их о различных событиях. 
Механизм сигналов включает несколько этапов:

1. **Отправка сигнала**:  
   - Сигналы могут быть посланы как самим ядром (например, `SIGSEGV` при ошибке сегментации) или другими процессами (например, командой `kill`).
   - Для отправки сигнала процессу используется системный вызов `kill(pid, sig)`, где `pid` — это ID процесса, а `sig` — код сигнала. Команда `kill` в терминале тоже использует этот вызов.

2. **Регистрация обработчиков**:
   - Процесс может заранее указать, как он будет обрабатывать сигналы, задав "обработчик сигнала". Если обработчик не задан, система выполняет действие по умолчанию.
   - Для регистрации обработчика обычно используются функции `signal()` или `sigaction()`. Обработчик асинхронно запускается при получении сигнала, даже если процесс выполняет другие задачи.

3. **Доставка сигнала**:
   - Сигнал добавляется в "очередь сигналов" процесса. Если сигнал приходит несколько раз, то он может быть либо поставлен в очередь (если это допустимо), либо перезаписан, так как некоторые сигналы не ставятся в очередь.
   - Ядро проверяет очередь сигналов при каждом возвращении процесса в состояние выполнения. Если там есть сигналы, процесс их обрабатывает.

4. **Обработка сигнала**:
   - Обработка сигнала может быть разной:
     - **Стандартное действие** — Например, для `SIGKILL` и `SIGTERM` это завершение процесса.
     - **Игнорирование сигнала** — Если процесс настроен игнорировать сигнал.
     - **Выполнение обработчика** — Если процесс задал обработчик сигнала, то он будет выполнен. Во время работы обработчика основной код процесса приостанавливается.

### Пример: Взаимодействие сигналов с процессами
Когда процесс получает сигнал, его выполнение приостанавливается, и система передает управление обработчику. Например:

- Если процесс выполняет долгую операцию (например, чтение из файла) и приходит `SIGINT`, процесс временно прерывает работу, выполняет обработчик для `SIGINT`, затем возвращается к своему исходному состоянию.

### Ограничения и особенности
- Некоторые сигналы не могут быть перехвачены (например, `SIGKILL` и `SIGSTOP`), что обеспечивает системное управление процессами.
- Сигналы могут быть заблокированы на время критических секций кода, чтобы избежать проблем с состоянием данных (используются маски сигналов).
- Сигналы работают асинхронно и могут прерывать выполнение в любой момент, поэтому в обработчиках рекомендуется избегать сложных действий, например, использования функций, которые могут блокировать процесс.


сигналы в Linux действительно похожи на прерывания, но есть важные различия в их работе и уровне взаимодействия с процессами:

1. **Прерывания**:
   - Прерывания — это сигналы, которые поступают непосредственно в процессор от внешних устройств (например, клавиатуры, таймера, сетевой карты) или от самого процессора.
   - Прерывания обрабатываются ядром операционной системы, и пользовательские процессы о них не знают напрямую.
   - Цель прерываний — обеспечить быструю реакцию процессора на события, требующие немедленного выполнения кода, например, для обработки данных с устройства.

2. **Сигналы**:
   - Сигналы предназначены для взаимодействия на уровне процессов и реализованы на уровне операционной системы.
   - Они используются для передачи событий или команд от одного процесса к другому или от ядра к процессу.
   - Например, `SIGTERM` или `SIGINT` сигнализируют процессу, что он должен завершиться, а `SIGKILL` завершает процесс принудительно.

### Сходства
- Как и прерывания, сигналы асинхронны и могут прерывать выполнение процесса в произвольный момент.
- Сигналы и прерывания работают через специальные обработчики, которые выполняются при получении сигнала или прерывания.

### Различия
- Прерывания работают на уровне аппаратного обеспечения и ядра, а сигналы — на уровне процессов, через API, предоставляемый операционной системой.
- Сигналы применяются только к процессам и управляют их состоянием (завершение, приостановка и т.д.), тогда как прерывания могут обрабатывать любые аппаратные события.

Таким образом, сигналы можно считать "пользовательским аналогом" прерываний, но их область применения — взаимодействие между процессами и управление процессами в операционной системе.
 
### Диспозиция сигнала в Unix-подобных системах — это определённое действие, которое процесс выполняет при получении сигнала. Когда сигнал отправляется процессу, он обрабатывается согласно его текущей диспозиции. Возможные диспозиции сигнала:

1. **Игнорирование** — процесс игнорирует сигнал и ничего не делает.
2. **Обработка по умолчанию** — выполняется действие, установленное системой для этого сигнала (например, завершение процесса при получении сигнала `SIGTERM`).
3. **Пользовательская обработка** — выполнение пользовательской функции-обработчика (handler), которую процесс назначает для сигнала.

Некоторые сигналы, такие как `SIGKILL` и `SIGSTOP`, имеют фиксированную диспозицию, их нельзя изменить или игнорировать.
 
 
 */