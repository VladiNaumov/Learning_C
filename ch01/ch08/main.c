#include <stdio.h>

// Определение структуры Rectangle
typedef struct {
    float width;      // Ширина
    float height;     // Высота
    float area;       // Площадь
    float perimeter;  // Периметр
} Rectangle;

// Функция для создания прямоугольника и вычисления его свойств
Rectangle create_rectangle(Rectangle *rect, float width, float height) {
    rect->width = width;            // Устанавливаем ширину
    rect->height = height;          // Устанавливаем высоту
    rect->area = width * height;    // Вычисляем площадь
    rect->perimeter = 2 * (width + height); // Вычисляем периметр
    return *rect;                   // Возвращаем заполненную структуру
}

// Функция для вывода свойств прямоугольника
void print_rectangle(Rectangle rect) {
    printf("Rectangle:\n");
    printf("Width: %.2f\n", rect.width);
    printf("Height: %.2f\n", rect.height);
    printf("Area: %.2f\n", rect.area);
    printf("Perimeter: %.2f\n", rect.perimeter);
}

int main() {

     Rectangle rec;
    // Создание прямоугольника через функцию create_rectangle
    Rectangle myRect = create_rectangle(&rec, 5.0, 3.0);

    // Вывод свойств прямоугольника на экран
    print_rectangle(myRect);

    /*    Использование указателя и динамическое выделение памяти:     */

        Rectangle *rec = (Rectangle*) malloc(sizeof(Rectangle));  // Выделяем память для структуры

        // Создание прямоугольника через функцию create_rectangle
        Rectangle myRect = create_rectangle(rec, 5.0, 3.0);

        // Вывод свойств прямоугольника на экран
        print_rectangle(myRect);

        free(rec);  // Освобождаем выделенную память


    return 0;
}


/*
Основные различия
При передаче структуры по значению создаётся копия всей структуры,
что может быть неэффективно, если структура большая.

При передаче указателя копии не создаются,
передается только адрес, что экономит память и время.

При передаче по значению функция работает с копией и не изменяет оригинальные данные.
При передаче указателя функция работает с оригиналом и может его изменить.

Безопасность:
Передача по значению безопаснее, так как функция не может случайно изменить данные вне своей области видимости.
Передача указателя позволяет изменять данные, но требует более осторожного подхода.

При динамическом выделении памяти ты работаешь с указателями, поскольку именно указатель возвращается функцией выделения памяти.
Другого способа передачи данных в функции, кроме как через указатель, нет, поскольку сама структура как объект в таком случае существует только в памяти, доступной через указатель.


*/