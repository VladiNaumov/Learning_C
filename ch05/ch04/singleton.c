/*
Singleton обеспечивает существование единственного экземпляра некоторой структуры или объекта
и предоставляет глобальную точку доступа к этому экземпляру.
В C можно реализовать singleton через статическую переменную в пределах файла и функцию для получения указателя на этот объект.
*/

#include <stdio.h>

// Определение структуры, которая будет использоваться в качестве Singleton
typedef struct {
    int value;
} Singleton;

// Функция для получения экземпляра Singleton
// Если экземпляра ещё нет, он создаётся
Singleton* get_instance() {
    static Singleton instance;  // Статическая переменная, которая хранит единственный экземпляр
    return &instance;  // Возвращаем указатель на экземпляр
}

int main() {
    Singleton* s1 = get_instance();
    s1->value = 10;

    Singleton* s2 = get_instance();
    printf("Value: %d\n", s2->value);  // Выведет 10, так как s1 и s2 указывают на один и тот же экземпляр

    return 0;
}

